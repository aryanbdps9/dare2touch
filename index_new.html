<!DOCTYPE html>
<html>
	<head>
		<title>Server</title>
	</head>

	<script src = "/socket.io/socket.io.js"></script>
	<script src="/renderer.js"></script>
	<script src="/gc.js"></script>
	<script src="/grid.js"></script>
	<script>
		var my_game_core = new gc(0);

		var socket = my_game_core.get_socket();
		console.log(socket);

		function Join() {
			socket.emit('setPlayerID', document.getElementById('PlayerID').value);
		};
		socket.on('s_add_player', function(data) {
			var playerID = document.getElementById('PlayerID').value;
			document.body.innerHTML='';
			document.body.innerHTML+='(<b>'+playerID+'</b>) is connected to the game with GameID <b>' + my_game_core.get_gameID() + '</b>';
			my_game_core.client_add_player(data);
		});
		socket.on('create_new_game', function(data) {
			var playerID = document.getElementById('PlayerID').value;
			var x = data.GameID;
			document.body.innerHTML='';
			document.body.innerHTML+='HOST (<b>'+playerID+'</b>) is connected to the game with GameID <b>' + x + '</b>';
		});

		socket.on('GameIDExists', function(data) {
			document.getElementById('error-container').innerHTML = data;
		});

		socket.on('PlayerIDExists', function(data) {
			document.getElementById('error-container').innerHTML = data;
		});

		socket.on('join_success', my_game_core.client_onconnected);

		socket.on('settingPlayerID', function(data){
			game_ID = document.getElementById('GameID').value;
			no_OfPlayers = document.getElementById('NoOfPlayers').value;
			socket.emit('setGameID', {gameID:game_ID, playerID:data, noOfPlayers:no_OfPlayers});

		});


		
		/*socket.on('newmsg', function(data){
			if(user) {document.body.innerHTML += '<b>' + data +'</b> is connected <br>';}
		});


		socket.on('oldmsg1', function(data){
			document.body.innerHTML += '<b>' + data +'</b> is connected <br>';
		});*/
	
		
	</script>
	
	<body>
		<div id = "error-container"></div>
		<input id = "PlayerID" type = "text" name = "PlayerID" value = "" 
			placeholder = "Enter Username!">
		<input id = "GameID" type = "text" name = "GameID" value = "" 
			placeholder = "Enter GameID!">
		<input id = "NoOfPlayers" type = "text" name = "NoOfPlayers" value = "" 
			placeholder = "Enter the No. of Players!">
		<button type = "button" name = "button" onclick = "Join()">
			Connect!!
		</button>
		<canvas id="myCanvas" width="720" height="480" style="border:1px solid #d3d3d3;">
	</body>
</html>